# Shell Tools and Scripting

## Variable

```shell
foo=bar # ä¸èƒ½æœ‰å¤šä½™çš„ç©ºæ ¼
# è®¿é—® foo ä½¿ç”¨ $foo
echo $foo
```

<img src="./assets/CleanShot%202024-01-03%20at%2012.17.41@2x.png" alt="CleanShot 2024-01-03 at 12.17.41@2x" style="zoom:50%;" />

```shell
foo = bar # å¤±è´¥
```

<img src="./assets/CleanShot%202024-01-03%20at%2012.19.40@2x.png" alt="CleanShot 2024-01-03 at 12.19.40@2x" style="zoom:50%;" />

## â€œå­—ç¬¦ä¸²æ¨¡ç‰ˆâ€ using Double Quotes

```shell
echo "value is $foo"
```

<img src="./assets/CleanShot%202024-01-03%20at%2012.21.05@2x.png" alt="CleanShot 2024-01-03 at 12.21.05@2x" style="zoom:50%;" />

## 'åŸå§‹å­—ç¬¦ä¸²' using Single Quotes

```shell
echo 'value is $foo'
```

<img src="./assets/CleanShot%202024-01-03%20at%2012.22.51@2x.png" alt="CleanShot 2024-01-03 at 12.22.51@2x" style="zoom:50%;" />

## Mcd Function

<img src="./assets/CleanShot%202024-01-03%20at%2012.27.17@2x.png" alt="CleanShot 2024-01-03 at 12.27.17@2x" style="zoom:50%;" />

## Define Function

```shell
mcd(){
	mkdir -p "$1" # è®¿é—®ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œ $0 è¡¨ç¤ºè„šæœ¬åç§°
}
```

# Soucre

åŠ è½½å¹¶æ‰§è¡Œè„šæœ¬

## Call Function

```shell
mcd ...args # no ()
```

# $?

ä¸Šä¸€ä¸ªå‘½ä»¤çš„é”™è¯¯ä»£ç 

<img src="./assets/CleanShot%202024-01-03%20at%2012.31.19@2x.png" alt="CleanShot 2024-01-03 at 12.31.19@2x" style="zoom:50%;" />

## $_

ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°

<img src="./assets/CleanShot%202024-01-03%20at%2012.30.59@2x.png" alt="CleanShot 2024-01-03 at 12.30.59@2x" style="zoom:50%;" />

*Usage*

<img src="./assets/CleanShot%202024-01-03%20at%2012.32.01@2x.png" alt="CleanShot 2024-01-03 at 12.32.01@2x" style="zoom:50%;" />

## !!

<img src="./assets/CleanShot%202024-01-03%20at%2012.33.30@2x.png" alt="CleanShot 2024-01-03 at 12.33.30@2x" style="zoom:50%;" />

*Usage*

<img src="./assets/CleanShot%202024-01-03%20at%2012.34.16@2x.png" alt="CleanShot 2024-01-03 at 12.34.16@2x" style="zoom:50%;" />

## Stderr

<img src="./assets/CleanShot%202024-01-03%20at%2012.36.49@2x.png" alt="CleanShot 2024-01-03 at 12.36.49@2x" style="zoom:50%;" />

*true has err 0 code,false has 1 err code*

<img src="./assets/CleanShot%202024-01-03%20at%2012.38.05@2x.png" alt="CleanShot 2024-01-03 at 12.38.05@2x" style="zoom:50%;" />

çŸ­è·¯è¡¨è¾¾å¼

## ;

<img src="./assets/CleanShot%202024-01-03%20at%2012.38.59@2x.png" alt="CleanShot 2024-01-03 at 12.38.59@2x" style="zoom:50%;" />

é“¾æ¥ä¸¤æ¡è¯­å¥

## foo=$(pwd)

<img src="./assets/CleanShot%202024-01-03%20at%2012.39.55@2x.png" alt="CleanShot 2024-01-03 at 12.39.55@2x" style="zoom:50%;" />

å°† pwd çš„è¾“å‡ºå­˜å…¥ foo å˜é‡

## Command Substitution

<img src="./assets/CleanShot%202024-01-03%20at%2012.41.10@2x.png" alt="CleanShot 2024-01-03 at 12.41.10@2x" style="zoom:50%;" />

## Process Substitution

```shell
cat <(ls) <(ls ..)
```

åœ¨å†…éƒ¨åˆ†åˆ«æ‰§è¡Œ *ls*,*ls ..*ï¼Œç„¶åå°†è¾“å‡ºæ”¾åˆ°*ä¸´æ—¶æ–‡ä»¶*å¹¶å°†æ–‡ä»¶æ ‡è¯†ç¬¦æä¾›ç»™æœ€å·¦è¾¹çš„å‘½ä»¤

## Example.sh

```shell
(base) llonvne@llonvne-4 2.Shell Tools and Scripting % vim example.sh
(base) llonvne@llonvne-4 2.Shell Tools and Scripting % cat example.sh 
#!/bin/bash

echo "Starting program at $(date)"

echo "Running program $0 with $# arguments with pid $$" 
# $# è¡¨ç¤ºæœ‰å‡ ä¸ªå‚æ•°

for file in "$@"; do
	grep foobar "$file" > /dev/null 2> /dev/null
	# /dev/null é»‘æ´æ–‡ä»¶ï¼Œå¾€é‡Œé¢å†™ä»»ä½•ä¸œè¥¿éƒ½ä¼šè¢«ä¸¢å¼ƒ
	# > /dev/null å°†æ ‡å‡†è¾“å‡ºå€’å…¥åˆ° /dev/null
	# 2> > /dev/null å°†æ ‡å‡†é”™è¯¯æµ å€’å…¥åˆ° /dev/null
	
	if [[ "$?" -ne 0 ]]; then
		# $? æ‹¿åˆ°é”™è¯¯ä»£ç 
		#  -ne not equal
		echo "File $file does not have any foobar,adding one"
		echo "# foobar" >> "$file"
	fi
done
(base) llonvne@llonvne-4 2.Shell Tools and Scripting % 
```

## $# 

è¡¨ç¤ºæœ‰å‡ ä¸ªå‚æ•°

## $$

è¡¨ç¤ºè¯¥å‘½ä»¤çš„è¿›ç¨‹ID

## $@

å±•å¼€ä¸ºæ‰€æœ‰å‚æ•°

## -ne not equal

å› ä¸º < > æœ‰ç‰¹æ®Šç”¨æ³•ï¼Œä½¿ç”¨è½¬ä¹‰ç¬¦å·

## man test

<img src="./assets/CleanShot%202024-01-03%20at%2013.02.08@2x.png" alt="CleanShot 2024-01-03 at 13.02.08@2x" style="zoom:50%;" />

ä½¿ç”¨ man test æ¥æµ‹è¯•ä¸€ç³»åˆ—ç›¸ç­‰

## ä½¿ç”¨é€šé…ç¬¦

## * åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦

![CleanShot 2024-01-03 at 13.05.03@2x](./assets/CleanShot%202024-01-03%20at%2013.05.03@2x.png)

## ï¼ŸåŒ¹é…å•ä¸ªå­—ç¬¦

![CleanShot 2024-01-03 at 13.07.17@2x](./assets/CleanShot%202024-01-03%20at%2013.07.17@2x.png)

## {}

![CleanShot 2024-01-03 at 13.12.03@2x](./assets/CleanShot%202024-01-03%20at%2013.12.03@2x.png)

ç­‰ä»·äº

![CleanShot 2024-01-03 at 13.12.20@2x](./assets/CleanShot%202024-01-03%20at%2013.12.20@2x.png)

*ç¬›å¡å°”ç§¯çš„å½¢å¼å±•å¼€*

![CleanShot 2024-01-03 at 13.13.28@2x](./assets/CleanShot%202024-01-03%20at%2013.13.28@2x.png)

![CleanShot 2024-01-03 at 13.14.00@2x](./assets/CleanShot%202024-01-03%20at%2013.14.00@2x.png)

## Range

![CleanShot 2024-01-03 at 13.14.45@2x](./assets/CleanShot%202024-01-03%20at%2013.14.45@2x.png)

![CleanShot 2024-01-03 at 13.14.57@2x](./assets/CleanShot%202024-01-03%20at%2013.14.57@2x.png)

## Diff

<img src="./assets/CleanShot%202024-01-03%20at%2013.16.01@2x.png" alt="CleanShot 2024-01-03 at 13.16.01@2x" style="zoom:50%;" />

# shebang

*the way that the Shell will know how to run this program*

## Tldr

*Lack of Internet ğŸ˜¡*

TODO!

# Find

æ‰¾åˆ°æ‰€æœ‰ä»¥ .txt ç»“å°¾çš„æ–‡ä»¶ 

```shell
find . -name '*.txt'
```

```shell
-type d # æ‰¾åˆ°æ–‡ä»¶å¤¹
```

```shell
find . -path '**/text/*.py' -type f
```

```shell
-mtime 1 # ä¸€å¤©å†…
```

```shell
find . -name '*.tmp' -exec rm {} \; # -exec æ‰§è¡Œï¼Œæ‰¾åˆ°æ¯ä¸€ä¸ªç”¨ tmp ç»“å°¾çš„æ–‡ä»¶å¹¶åˆ é™¤ä»–
```

## Locate

ä½¿ç”¨ç´¢å¼•ï¼ŒåŠŸèƒ½ä¸ find å·®ä¸å¤š

## Grep

```shell
grep -R Hello . # åœ¨å½“å‰ç›®å½•ä¸‹é€’å½’æœç´¢ Hello
```



<img src="./assets/CleanShot%202024-01-03%20at%2021.00.22@2x.png" alt="CleanShot 2024-01-03 at 21.00.22@2x" style="zoom:50%;" />

## RipGrep

```shell
-C è¡Œæ•° # æŸ¥çœ‹ä¸Šä¸‹æ–‡
```

<img src="./assets/CleanShot%202024-01-03%20at%2021.03.11@2x.png" alt="CleanShot 2024-01-03 at 21.03.11@2x" style="zoom:50%;" />

```shell
-u # ä¸å¿½è§†éšè—æ–‡ä»¶
```

```shell
--files-without-match # æ‰“å°å‡ºæ‰€æœ‰ä¸åŒ¹é…çš„é¡¹ç›®
```

```shell
-t åç¼€å # æŸ¥æ‰¾åç¼€å
```

```shell
-stats # æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
```

<img src="./assets/CleanShot%202024-01-03%20at%2021.08.18@2x.png" alt="CleanShot 2024-01-03 at 21.08.18@2x" style="zoom:50%;" />

## History

```
å†å²è®°å½•
```

## Control+R åå‘æœç´¢

æœç´¢æ‰“è¿‡çš„æŒ‡ä»¤ï¼Œä½¿ç”¨ Control + R æ¢ä¸€æ¡è®°å½•

# FZF

![CleanShot 2024-01-03 at 21.14.27@2x](./assets/CleanShot%202024-01-03%20at%2021.14.27@2x.png)

æ‰“å¼€æ–‡ä»¶ä¼ é€’åˆ° FZF

<img src="./assets/CleanShot%202024-01-03%20at%2021.14.45@2x.png" alt="CleanShot 2024-01-03 at 21.14.45@2x" style="zoom:50%;" />

äº¤äº’å¼çš„è¿›è¡Œæœç´¢

## ls -R

åˆ—å‡ºæ•´ä¸ªç›®å½•ç»“æ„

# Tree

<img src="./assets/CleanShot%202024-01-03%20at%2021.18.46@2x.png" alt="CleanShot 2024-01-03 at 21.18.46@2x" style="zoom:50%;" />

æ ‘å½¢çš„åˆ—å‡ºå†…å®¹

## Broot

<img src="./assets/CleanShot%202024-01-03%20at%2021.20.17@2x.png" alt="CleanShot 2024-01-03 at 21.20.17@2x" style="zoom:50%;" />

åŠ¨æ€çš„éå†ç›®å½•

## nnn

<img src="./assets/CleanShot%202024-01-03%20at%2021.27.37@2x.png" alt="CleanShot 2024-01-03 at 21.27.37@2x" style="zoom: 33%;" />

Finder 

